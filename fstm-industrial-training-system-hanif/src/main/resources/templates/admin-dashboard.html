<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard - UPM Industrial Training</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap + Icons + Font -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- your css is static/app.css -->
  <link th:href="@{/app.css}" rel="stylesheet">

  <style>
    body{
      font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:
              radial-gradient(1200px 600px at 10% 0%, rgba(59,130,246,.12), transparent 55%),
              radial-gradient(900px 500px at 90% 20%, rgba(99,102,241,.10), transparent 55%),
              #f6f8fb;
    }

    .container-narrow{ max-width:1240px; }

    /* SaaS panel */
    .panel{
      background:#fff;
      border-radius:18px;
      padding:18px 20px;
      box-shadow:0 10px 30px rgba(15,23,42,.06);
      border:1px solid rgba(148,163,184,.18);
    }
    .panel-title{
      font-weight:800;
      font-size:.95rem;
      letter-spacing:-.2px;
      margin-bottom:12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .panel-sub{
      font-size:.8rem;
      color:#64748b;
      font-weight:600;
    }

    /* soft navbar like SaaS */
    .appbar{
      background:#ffffff !important;
      border-bottom:1px solid rgba(148,163,184,.25);
    }
    .appbar .navbar-brand span{
      font-weight:800;
      color:#0f172a;
    }
    .appbar .nav-link{
      color:#334155 !important;
      font-weight:700;
      padding:.75rem .9rem;
    }
    .appbar .nav-link:hover{
      color:#2563eb !important;
    }

    /* header label */
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding:6px 12px; border-radius:999px;
      background:#eef2ff; color:#1e40af;
      font-size:.85rem; font-weight:800;
    }
    .muted{ color:#64748b; }

    /* overview KPI blocks inside one panel */
    .kpi-label{ color:#64748b; font-weight:700; font-size:.85rem; }
    .kpi-value{ font-size:1.9rem; font-weight:900; letter-spacing:-.3px; color:#0f172a; line-height:1.1; }
    .kpi-ico{
      width:42px;height:42px;border-radius:14px;
      display:grid;place-items:center;
      background:#f1f5f9;
      color:#0f172a;
      font-size:1.1rem;
    }

    /* queue row style */
    .queue-row{
      padding:10px 0;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .queue-left{
      display:flex;
      gap:12px;
      align-items:flex-start;
    }
    .queue-dot{
      width:10px;height:10px;border-radius:50%;
      margin-top:.35rem;
      background:rgba(59,130,246,.65);
      box-shadow:0 0 0 4px rgba(59,130,246,.15);
      flex:0 0 auto;
    }
    .queue-title{ font-weight:800; letter-spacing:-.15px; }
    .queue-desc{ color:#64748b; font-size:.85rem; }

    .btn-rounded{ border-radius:12px; padding:.55rem .9rem; }

    .btn-soft{
      background:#f1f5ff;
      border:1px solid rgba(59,130,246,.25);
      color:#1d4ed8;
      font-weight:800;
    }
    .btn-soft:hover{ background:#e8efff; }

    /* quick access tiles */
    .tile{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px 16px;
      border-radius:16px;
      border:1px solid rgba(148,163,184,.18);
      background:#fff;
      text-decoration:none;
      color:inherit;
      box-shadow:0 8px 22px rgba(15,23,42,.05);
      transition:transform .10s ease, box-shadow .10s ease;
    }
    .tile:hover{
      transform:translateY(-2px);
      box-shadow:0 12px 28px rgba(15,23,42,.08);
    }
    .tile-ico{
      width:42px;height:42px;border-radius:14px;
      background:#f1f5f9;
      display:grid; place-items:center;
      color:#0f172a; font-size:1.1rem;
      flex:0 0 auto;
    }
    .tile-title{ font-weight:900; margin:0; letter-spacing:-.15px; }
    .tile-desc{ margin:0; color:#64748b; font-size:.9rem; }
    .tile-right{
      width:38px;height:38px;border-radius:12px;
      background:#f1f5f9; display:grid; place-items:center;
      color:#0f172a;
      flex:0 0 auto;
    }

    /* ===== Highlighted marking modules (Logbook & Final Report) ===== */
    .tile-primary {
      border: 1.5px solid rgba(37, 99, 235, 0.25);
      background: linear-gradient(
              180deg,
              #f8fbff 0%,
              #ffffff 100%
      );
    }

    .tile-primary .tile-title {
      color: #1d4ed8; /* blue-700 */
      font-weight: 700;
    }

    .tile-primary .tile-ico {
      background: rgba(37, 99, 235, 0.1);
      color: #2563eb; /* blue-600 */
    }

    .tile-primary:hover {
      border-color: rgba(37, 99, 235, 0.45);
      box-shadow: 0 10px 28px rgba(37, 99, 235, 0.12);
      transform: translateY(-1px);
    }


    /* spacing consistency */
    .section-gap{ margin-bottom:18px; }
  </style>
</head>

<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg appbar">
  <div class="container container-narrow">
    <a class="navbar-brand d-flex align-items-center gap-2" th:href="@{/admin/dashboard}">
      <img th:src="@{/Picture1.png}" alt="UPM" style="height:28px">
      <span>Admin Panel ‚Ä¢ UPM Industrial Training</span>
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navAdmin">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navAdmin" class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a th:href="@{/admin/students}" class="nav-link">Students</a></li>
        <li class="nav-item"><a th:href="@{/admin/lecturers}" class="nav-link">Lecturers</a></li>
        <li class="nav-item"><a th:href="@{/admin/evaluations}" class="nav-link">Evaluations</a></li>
        <li class="nav-item"><a th:href="@{/admin/company-master}" class="nav-link">Company Master</a></li>
        <li class="nav-item"><a th:href="@{/admin/company-info(status='PENDING')}" class="nav-link">Submissions</a></li>
        <li class="nav-item"><a th:href="@{/admin/placements}" class="nav-link">Placements</a></li>
        <li class="nav-item"><a th:href="@{/logout}" class="nav-link">Logout</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="container container-narrow py-4">

  <!-- Page Header -->
  <div class="d-flex flex-wrap align-items-end justify-content-between gap-3 section-gap">
    <div>
      <span class="pill"><i class="bi bi-speedometer2"></i> Dashboard</span>
      <h1 class="h4 mb-0 mt-2" style="font-weight:900; letter-spacing:-.3px;">Welcome, Admin üéì</h1>
      <div class="muted mt-1">Overview of students, companies, and pending items.</div>
    </div>

    <!-- Keep optional action area (no backend dependency) -->
    <!--
    <a class="btn btn-primary btn-rounded" th:href="@{/admin/evaluations/export}">
      <i class="bi bi-download me-1"></i> Export Grades
    </a>
    -->
  </div>

  <!-- Layout: Overview + Action Required -->
  <div class="row g-3 section-gap">

    <!-- Overview panel -->
    <div class="col-12 col-lg-7">
      <section class="panel h-100">
        <div class="panel-title">
          <span>Overview</span>
          <span class="panel-sub"><i class="bi bi-calendar3 me-1"></i> All time</span>
        </div>

        <div class="row g-3">
          <div class="col-12 col-sm-6">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <div class="kpi-label">Total Students</div>
                <div class="kpi-value" th:text="${studentCount} ?: 0">0</div>
              </div>
              <div class="kpi-ico"><i class="bi bi-people-fill"></i></div>
            </div>
          </div>

          <div class="col-12 col-sm-6">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <div class="kpi-label">Companies</div>
                <div class="kpi-value" th:text="${companyCount} ?: 0">0</div>
              </div>
              <div class="kpi-ico"><i class="bi bi-buildings"></i></div>
            </div>
          </div>

          <div class="col-12 col-sm-6">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <div class="kpi-label">Evaluations</div>
                <div class="kpi-value" th:text="${evalCount} ?: 0">0</div>
              </div>
              <div class="kpi-ico"><i class="bi bi-clipboard-check"></i></div>
            </div>
          </div>

          <div class="col-12 col-sm-6">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <div class="kpi-label">Documents</div>
                <div class="kpi-value" th:text="${documentCount} ?: 0">0</div>
              </div>
              <div class="kpi-ico"><i class="bi bi-file-earmark-text"></i></div>
            </div>
          </div>
        </div>

        <hr class="my-3">

        <div class="row g-3">
          <div class="col-12 col-md-6">
            <div class="text-muted small fw-semibold">Tip</div>
            <div class="fw-semibold" style="color:#0f172a;">
              Use ‚ÄúAction Required‚Äù to clear approvals and reviews quickly.
            </div>
            <div class="text-muted small">This keeps placements and logbooks moving smoothly.</div>
          </div>
          <div class="col-12 col-md-6">
            <div class="text-muted small fw-semibold">Shortcuts</div>
            <div class="d-flex flex-wrap gap-2 mt-1">
              <a class="btn btn-soft btn-sm btn-rounded" th:href="@{/admin/placements}">
                Placements
              </a>
              <a class="btn btn-soft btn-sm btn-rounded" th:href="@{/admin/company-info(status='PENDING')}">
                Submissions
              </a>
              <a class="btn btn-soft btn-sm btn-rounded" th:href="@{/admin/evaluations}">
                Evaluations
              </a>
            </div>
          </div>
        </div>

      </section>
    </div>

    <!-- Action Required panel -->
    <div class="col-12 col-lg-5">
      <section class="panel h-100">
        <div class="panel-title">
          <span>Action Required</span>
          <span class="panel-sub">Queues that need attention</span>
        </div>

        <div class="vstack">

          <div class="queue-row" th:if="${awaitingApproval != null}">
            <div class="queue-left">
              <span class="queue-dot"></span>
              <div>
                <div class="queue-title">Placements Awaiting Admin</div>
                <div class="queue-desc">
                  Pending: <span class="fw-bold text-dark" th:text="${awaitingApproval} ?: 0">0</span>
                </div>
              </div>
            </div>
            <a class="btn btn-soft btn-rounded" th:href="@{/admin/placements(status='AWAITING_ADMIN')}">Review</a>
          </div>

          <hr class="my-1" th:if="${awaitingApproval != null}"/>

          <div class="queue-row" th:if="${pendingCompanyInfo != null}">
            <div class="queue-left">
              <span class="queue-dot"></span>
              <div>
                <div class="queue-title">Company Submissions</div>
                <div class="queue-desc">
                  Pending: <span class="fw-bold text-dark" th:text="${pendingCompanyInfo} ?: 0">0</span>
                </div>
              </div>
            </div>
            <a class="btn btn-soft btn-rounded" th:href="@{/admin/company-info(status='PENDING')}">Review</a>
          </div>

          <hr class="my-1" th:if="${pendingCompanyInfo != null}"/>

          <div class="queue-row" th:if="${awaitingSupEndorse != null}">
            <div class="queue-left">
              <span class="queue-dot"></span>
              <div>
                <div class="queue-title">Logbooks: Awaiting Supervisor</div>
                <div class="queue-desc">
                  Pending: <span class="fw-bold text-dark" th:text="${awaitingSupEndorse} ?: 0">0</span>
                </div>
              </div>
            </div>
            <a class="btn btn-soft btn-rounded" th:href="@{/admin/logbooks(status='PENDING')}">Review</a>
          </div>

          <hr class="my-1" th:if="${awaitingSupEndorse != null}"/>

          <div class="queue-row">
          <div class="queue-left">
              <span class="queue-dot"></span>
              <div>
                <div class="queue-title">Logbooks: Awaiting Lecturer</div>
                <div class="queue-desc">
                  Pending: <span class="fw-bold text-dark" th:text="${pendingLogbooksLecturer}">0</span>

                </div>
              </div>
            </div>
            <a class="btn btn-soft btn-rounded" th:href="@{/admin/logbooks/students}">Review</a>
          </div>

          <div class="text-muted small mt-2"
               th:if="${(awaitingApproval == null) and (pendingCompanyInfo == null) and (awaitingSupEndorse == null) and (awaitingLecEndorse == null)}">
            No queues to display.
          </div>

        </div>
      </section>
    </div>

  </div>

  <!-- Quick Access -->
  <section class="panel section-gap">
    <div class="panel-title">
      <span>Quick Access</span>
      <span class="panel-sub">Jump to key admin modules</span>
    </div>

    <div class="row g-3">

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/admin/students}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-people-fill"></i></div>
            <div>
              <p class="tile-title mb-1">Students</p>
              <p class="tile-desc">View, edit, and manage student data</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/admin/lecturers}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-person-badge"></i></div>
            <div>
              <p class="tile-title mb-1">Lecturers</p>
              <p class="tile-desc">Manage visiting lecturer accounts</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/admin/industry-supervisors}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-person-workspace"></i></div>
            <div>
              <p class="tile-title mb-1">Industry Supervisors</p>
              <p class="tile-desc">View industry supervisor accounts</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/admin/evaluations}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-clipboard-check"></i></div>
            <div>
              <p class="tile-title mb-1">Evaluations</p>
              <p class="tile-desc">Track evaluation submissions and status</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/admin/company-info(status='PENDING')}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-file-text"></i></div>
            <div>
              <p class="tile-title mb-1">Company Submissions</p>
              <p class="tile-desc">Verify or reject student-submitted company info</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/admin/company-master}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-buildings"></i></div>
            <div>
              <p class="tile-title mb-1">Company Master</p>
              <p class="tile-desc">Deduped catalog for placements & analytics</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile tile-primary" th:href="@{/admin/logbooks}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico">
              <i class="bi bi-journal-text"></i>
            </div>
            <div>
              <p class="tile-title mb-1">Logbook (10%)</p>
              <p class="tile-desc">View and mark students logbook submissions</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile tile-primary" th:href="@{/admin/final-reports}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico">
              <i class="bi bi-file-earmark-text"></i>
            </div>
            <div>
              <p class="tile-title mb-1">Final Report (10%)</p>
              <p class="tile-desc">Mark students Final Report and Video</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>




      <div class="col-12">
        <div class="tile" style="cursor:default;">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-diagram-3"></i></div>
            <div>
              <p class="tile-title mb-1">Placements</p>
              <p class="tile-desc">Approve placements and monitor status</p>
            </div>
          </div>
          <div class="d-flex gap-2">
            <a th:href="@{/admin/placements}" class="btn btn-primary btn-rounded">View</a>
            <a th:href="@{/admin/placements/new}" class="btn btn-outline-primary btn-rounded">+ New</a>
          </div>
        </div>
      </div>

    </div>
  </section>

</main>

<footer class="text-center text-muted py-4 small">
  ¬© <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2025</span>, Faculty of Food Science and Technology, UPM
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
