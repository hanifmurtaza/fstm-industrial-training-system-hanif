<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard - UPM Industrial Training</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap + Icons + Font -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- your css is static/app.css -->
  <link th:href="@{/app.css}" rel="stylesheet">

  <style>
    body{ font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif; }

    /* Use wider container like the previous better-looking one */
    .container-narrow{ max-width:1240px; }

    /* Slightly roomier cards and spacing */
    .kpi-card{
      border-radius:16px;
      background:#fff;
      border:1px solid rgba(148,163,184,.25);
      box-shadow:0 10px 24px rgba(15,23,42,.08);
      padding:16px 18px;
    }
    .kpi-label{ color:#64748b; font-weight:600; font-size:.85rem; }
    .kpi-value{ font-size:1.55rem; font-weight:800; line-height:1.15; color:#0f172a; }

    .stat-grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:18px; }
    @media (max-width:1199.98px){ .stat-grid{ grid-template-columns:repeat(2,1fr); } }
    @media (max-width:575.98px){ .stat-grid{ grid-template-columns:1fr; } }

    .feature-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:20px; }
    @media (max-width:1199.98px){ .feature-grid{ grid-template-columns:repeat(2,1fr); } }
    @media (max-width:767.98px){ .feature-grid{ grid-template-columns:1fr; } }

    .feature-card{
      border-radius:18px;
      border:1px solid rgba(148,163,184,.25);
      box-shadow:0 12px 30px rgba(15,23,42,.10);
      background:#fff;
    }
    .feature-card h5{ font-weight:800; letter-spacing:-0.2px; }
    .feature-card .lead{ color:#64748b; font-size:.95rem; }

    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding:6px 12px; border-radius:999px;
      background:#eef2ff; color:#1e40af;
      font-size:.85rem; font-weight:700;
    }
    .page-title{ letter-spacing:-0.2px; }
    .muted{ color:#64748b; }
    .btn-rounded{ border-radius:12px; padding:.6rem .95rem; }
  </style>
</head>

<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg appbar">
  <div class="container container-narrow">
    <a class="navbar-brand d-flex align-items-center gap-2" th:href="@{/admin/dashboard}">
      <img th:src="@{/Picture1.png}" alt="UPM" style="height:28px">
      <span>Admin Panel â€¢ UPM Industrial Training</span>
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navAdmin">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navAdmin" class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a th:href="@{/admin/students}" class="nav-link">Students</a></li>
        <li class="nav-item"><a th:href="@{/admin/lecturers}" class="nav-link">Lecturers</a></li>
        <li class="nav-item"><a th:href="@{/admin/evaluations}" class="nav-link">Evaluations</a></li>
        <li class="nav-item"><a th:href="@{/admin/companies}" class="nav-link">Companies</a></li>
        <li class="nav-item"><a th:href="@{/admin/company-master}" class="nav-link">Company Master</a></li>
        <li class="nav-item"><a th:href="@{/admin/company-info(status='PENDING')}" class="nav-link">Submissions</a></li>
        <li class="nav-item"><a th:href="@{/admin/placements}" class="nav-link">Placements</a></li>
        <li class="nav-item"><a th:href="@{/logout}" class="nav-link">Logout</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="container container-narrow py-4">

  <!-- Header -->
  <div class="d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3">
    <div>
      <span class="pill"><i class="bi bi-speedometer2"></i> Dashboard</span>
      <h1 class="h4 page-title mb-0 mt-2">Welcome, Admin ðŸŽ“</h1>
      <div class="muted mt-1">Overview of students, companies, and pending items.</div>
    </div>
  </div>

  <!-- KPIs -->
  <section class="stat-grid mb-3">
    <div class="kpi-card">
      <div class="kpi-label">Total Students</div>
      <div class="kpi-value" th:text="${studentCount} ?: 0">0</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Companies</div>
      <div class="kpi-value" th:text="${companyCount} ?: 0">0</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Evaluations</div>
      <div class="kpi-value" th:text="${evalCount} ?: 0">0</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-label">Documents</div>
      <div class="kpi-value" th:text="${documentCount} ?: 0">0</div>
    </div>
  </section>

  <!-- Review queues -->
  <section class="stat-grid mb-4">
    <div class="feature-card p-3" th:if="${awaitingApproval != null}">
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <div class="text-muted fw-semibold">Placements Awaiting Admin</div>
          <div class="fs-4 fw-bold" th:text="${awaitingApproval} ?: 0">0</div>
        </div>
        <a class="btn btn-outline-primary btn-rounded" th:href="@{/admin/placements(status='AWAITING_ADMIN')}">Review</a>
      </div>
    </div>

    <div class="feature-card p-3" th:if="${pendingCompanyInfo != null}">
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <div class="text-muted fw-semibold">Company Submissions</div>
          <div class="fs-4 fw-bold" th:text="${pendingCompanyInfo} ?: 0">0</div>
        </div>
        <a class="btn btn-outline-primary btn-rounded" th:href="@{/admin/company-info(status='PENDING')}">Review</a>
      </div>
    </div>

    <div class="feature-card p-3" th:if="${awaitingSupEndorse != null}">
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <div class="text-muted fw-semibold">Logbooks: Awaiting Sup</div>
          <div class="fs-4 fw-bold" th:text="${awaitingSupEndorse} ?: 0">0</div>
        </div>
        <a class="btn btn-outline-primary btn-rounded" th:href="@{/admin/logbooks(status='PENDING')}">Review</a>
      </div>
    </div>

    <div class="feature-card p-3" th:if="${awaitingLecEndorse != null}">
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <div class="text-muted fw-semibold">Logbooks: Awaiting Lecturer</div>
          <div class="fs-4 fw-bold" th:text="${awaitingLecEndorse} ?: 0">0</div>
        </div>
        <a class="btn btn-outline-primary btn-rounded" th:href="@{/admin/logbooks}">Review</a>
      </div>
    </div>
  </section>

  <!-- Features (Export card removed) -->
  <section class="feature-grid">
    <div class="feature-card p-4 text-center">
      <h5><i class="bi bi-people-fill me-1"></i> Manage Students</h5>
      <p class="lead mb-3">View, edit, and delete student data.</p>
      <a th:href="@{/admin/students}" class="btn btn-primary btn-rounded">View Students</a>
    </div>

    <div class="feature-card p-4 text-center">
      <h5><i class="bi bi-person-badge me-1"></i> Manage Lecturers</h5>
      <p class="lead mb-3">View, edit, and add academic supervisors.</p>
      <a th:href="@{/admin/lecturers}" class="btn btn-primary btn-rounded">View Lecturers</a>
    </div>

    <div class="feature-card p-4 text-center">
      <h5><i class="bi bi-person-workspace me-1"></i> Manage Industry Supervisors</h5>
      <p class="lead mb-3">View industry supervisor accounts.</p>
      <a th:href="@{/admin/industry-supervisors}" class="btn btn-primary btn-rounded">View Supervisors</a>
    </div>

    <div class="feature-card p-4 text-center">
      <h5><i class="bi bi-clipboard-check me-1"></i> Manage Evaluations</h5>
      <p class="lead mb-3">View and track evaluation submissions.</p>
      <a th:href="@{/admin/evaluations}" class="btn btn-primary btn-rounded">View Evaluations</a>
    </div>

    <div class="feature-card p-4 text-center">
      <h5><i class="bi bi-file-text me-1"></i> Company Submissions</h5>
      <p class="lead mb-3">Verify or reject student-submitted company info.</p>
      <a th:href="@{/admin/company-info(status='PENDING')}" class="btn btn-primary btn-rounded">Open Queue</a>
    </div>

    <div class="feature-card p-4 text-center">
      <h5><i class="bi bi-buildings me-1"></i> Company Master</h5>
      <p class="lead mb-3">Deduped catalog for placements & analytics.</p>
      <a th:href="@{/admin/company-master}" class="btn btn-primary btn-rounded">Open Master</a>
    </div>

    <!-- Placements (centered) -->
    <div class="feature-center">
      <div class="feature-card p-4 text-center">
        <h5><i class="bi bi-diagram-3 me-1"></i> Placements</h5>
        <p class="lead mb-3">Approve placements and monitor status.</p>
        <div class="d-flex gap-2 justify-content-center">
          <a th:href="@{/admin/placements}" class="btn btn-primary btn-rounded">View Placements</a>
          <a th:href="@{/admin/placements/new}" class="btn btn-outline-primary btn-rounded">+ New</a>
        </div>
      </div>
    </div>
  </section>

</main>

<footer class="text-center text-muted py-4 small">
  Â© <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2025</span>, Faculty of Food Science and Technology, UPM
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
