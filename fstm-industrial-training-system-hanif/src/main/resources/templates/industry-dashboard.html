<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <title>Industry Dashboard - UPM Industrial Training</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap + Icons + Font -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Same css path as admin -->
  <link th:href="@{/app.css}" rel="stylesheet">

  <style>
    body{
      font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:
              radial-gradient(1200px 600px at 10% 0%, rgba(59,130,246,.12), transparent 55%),
              radial-gradient(900px 500px at 90% 20%, rgba(99,102,241,.10), transparent 55%),
              #f6f8fb;
    }

    .container-narrow{ max-width:1240px; }

    /* SaaS panel */
    .panel{
      background:#fff;
      border-radius:18px;
      padding:18px 20px;
      box-shadow:0 10px 30px rgba(15,23,42,.06);
      border:1px solid rgba(148,163,184,.18);
    }
    .panel-title{
      font-weight:800;
      font-size:.95rem;
      letter-spacing:-.2px;
      margin-bottom:12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .panel-sub{
      font-size:.8rem;
      color:#64748b;
      font-weight:600;
    }

    /* soft navbar like SaaS (safe even if app.css already styles appbar) */
    .appbar{
      background:#0d6efd !important; /* bootstrap primary */
      border-bottom:0;
    }
    .appbar .navbar-brand span,
    .appbar .nav-link{
      color:#fff !important;
    }
    .appbar .nav-link:hover{
      color:#eaf2ff !important;
    }


    /* header label */
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding:6px 12px; border-radius:999px;
      background:#eef2ff; color:#1e40af;
      font-size:.85rem; font-weight:800;
    }
    .muted{ color:#64748b; }
    .page-title{ letter-spacing:-.3px; font-weight:900; }

    /* overview KPI blocks inside one panel */
    .kpi-label{ color:#64748b; font-weight:700; font-size:.85rem; }
    .kpi-value{ font-size:1.9rem; font-weight:900; letter-spacing:-.3px; color:#0f172a; line-height:1.1; }
    .kpi-ico{
      width:42px;height:42px;border-radius:14px;
      display:grid;place-items:center;
      background:#f1f5f9;
      color:#0f172a;
      font-size:1.1rem;
    }

    /* queue row style (task inbox vibe) */
    .queue-row{
      padding:10px 0;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .queue-left{
      display:flex;
      gap:12px;
      align-items:flex-start;
    }
    .queue-dot{
      width:10px;height:10px;border-radius:50%;
      margin-top:.35rem;
      background:rgba(59,130,246,.65);
      box-shadow:0 0 0 4px rgba(59,130,246,.15);
      flex:0 0 auto;
    }
    .queue-title{ font-weight:800; letter-spacing:-.15px; }
    .queue-desc{ color:#64748b; font-size:.85rem; }

    .btn-rounded{ border-radius:12px; padding:.55rem .9rem; }

    .btn-soft{
      background:#f1f5ff;
      border:1px solid rgba(59,130,246,.25);
      color:#1d4ed8;
      font-weight:800;
    }
    .btn-soft:hover{ background:#e8efff; }

    /* quick access tiles */
    .tile{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px 16px;
      border-radius:16px;
      border:1px solid rgba(148,163,184,.18);
      background:#fff;
      text-decoration:none;
      color:inherit;
      box-shadow:0 8px 22px rgba(15,23,42,.05);
      transition:transform .10s ease, box-shadow .10s ease;
    }
    .tile:hover{
      transform:translateY(-2px);
      box-shadow:0 12px 28px rgba(15,23,42,.08);
    }
    .tile-ico{
      width:42px;height:42px;border-radius:14px;
      background:#f1f5f9;
      display:grid; place-items:center;
      color:#0f172a; font-size:1.1rem;
      flex:0 0 auto;
    }
    .tile-title{ font-weight:900; margin:0; letter-spacing:-.15px; }
    .tile-desc{ margin:0; color:#64748b; font-size:.9rem; }
    .tile-right{
      width:38px;height:42px;border-radius:12px;
      background:#f1f5f9; display:grid; place-items:center;
      color:#0f172a;
      flex:0 0 auto;
    }
    .kpi-tile{
      background:#f8fafc;
      border:1px solid rgba(148,163,184,.18);
      border-radius:16px;
      padding:16px 16px;
      min-height:110px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
    }

    .kpi-tile .kpi-label{
      font-size:.9rem;
      font-weight:800;
      color:#475569;
    }

    .kpi-tile .kpi-value{
      font-size:2.6rem;
      font-weight:900;
      line-height:1;
      letter-spacing:-.5px;
      margin-top:4px;
      color:#0f172a;
    }

    .kpi-tile .kpi-ico{
      width:46px;
      height:46px;
      border-radius:16px;
      background:#eef2ff;
      color:#1d4ed8;
      display:grid;
      place-items:center;
      font-size:1.15rem;
    }

    /* Company name should not be huge like a number */
    .kpi-company{
      font-size:1.35rem !important;
      line-height:1.2 !important;
      letter-spacing:-.2px !important;
      margin-top:6px !important;
      word-break:break-word;
    }


    .section-gap{ margin-bottom:18px; }
  </style>
</head>

<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg appbar">
  <div class="container container-narrow">
    <a class="navbar-brand d-flex align-items-center gap-2" th:href="@{/industry/dashboard}">
      <img th:src="@{/Picture1.png}" alt="UPM" style="height:28px">
      <span>Industry Supervisor ‚Ä¢ UPM Industrial Training</span>
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navIndustry">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navIndustry" class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a th:href="@{/industry/dashboard}" class="nav-link">Dashboard</a></li>
        <li class="nav-item"><a th:href="@{/industry/logbooks}" class="nav-link">Logbooks</a></li>
        <li class="nav-item"><a th:href="@{/industry/placements}" class="nav-link">Placements</a></li>
        <li class="nav-item"><a th:href="@{/industry/evaluations}" class="nav-link">Evaluations</a></li>
        <li class="nav-item"><a th:href="@{/industry/opportunities}" class="nav-link">Opportunities</a></li>
        <li class="nav-item"><a th:href="@{/industry/companies}" class="nav-link">Profile</a></li>
        <li class="nav-item"><a th:href="@{/logout}" class="nav-link">Logout</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="container container-narrow py-4">

  <!-- Header -->
  <div class="d-flex flex-wrap align-items-end justify-content-between gap-3 section-gap">
    <div>
      <span class="pill"><i class="bi bi-building"></i> Industry Supervisor</span>

      <h1 class="h4 page-title mb-0 mt-2">
        Welcome, <span th:text="${displayName} ?: 'Industry Supervisor'">Industry Supervisor</span> üè¢
      </h1>

    </div>
  </div>


  <!-- Layout: Overview + Action Required -->
  <div class="row g-3 section-gap">

    <!-- Overview panel -->
    <div class="col-12 col-lg-7">
      <section class="panel h-100">
        <div class="panel-title">
          <span>Overview</span>
          <span class="panel-sub"><i class="bi bi-calendar3 me-1"></i> All time</span>
        </div>

        <div class="row g-3">

          <div class="col-12 col-sm-6">
            <div class="kpi-tile">
              <div>
                <div class="kpi-label">Logbooks Pending Review</div>
                <div class="kpi-value" th:text="${pending} ?: 0">0</div>
              </div>
              <div class="kpi-ico"><i class="bi bi-hourglass-split"></i></div>
            </div>
          </div>

          <div class="col-12 col-sm-6">
            <div class="kpi-tile">
              <div>
                <div class="kpi-label">Logbooks Approved</div>
                <div class="kpi-value" th:text="${approved} ?: 0">0</div>
              </div>
              <div class="kpi-ico"><i class="bi bi-check2-circle"></i></div>
            </div>
          </div>

          <div class="col-12 col-sm-6">
            <div class="kpi-tile">
              <div>
                <div class="kpi-label">Logbooks Rejected</div>
                <div class="kpi-value" th:text="${rejected} ?: 0">0</div>
              </div>
              <div class="kpi-ico"><i class="bi bi-x-circle"></i></div>
            </div>
          </div>

          <div class="col-12 col-sm-6">
            <div class="kpi-tile">
              <div>
                <div class="kpi-label">Company</div>
                <div class="kpi-value kpi-company" th:text="${companyName} ?: '‚Äî'">‚Äî</div>
              </div>
              <div class="kpi-ico"><i class="bi bi-buildings"></i></div>
            </div>
          </div>

        </div>

      </section>
    </div>


    <!-- Action Required panel -->
    <div class="col-12 col-lg-5">
      <section class="panel h-100">
        <div class="panel-title">
          <span>Action Required</span>
          <span class="panel-sub">Queues that need attention</span>
        </div>

        <div class="vstack">

          <!-- Logbooks pending -->
          <div class="queue-row">
            <div class="queue-left">
              <span class="queue-dot"></span>
              <div>
                <div class="queue-title">Logbooks Awaiting Your Review</div>
                <div class="queue-desc">
                  Pending: <span class="fw-bold text-dark" th:text="${pending} ?: 0">0</span>
                </div>
              </div>
            </div>
            <a class="btn btn-soft btn-rounded" th:href="@{/industry/logbooks(status='PENDING')}">Review</a>
          </div>

          <hr class="my-1">

          <!-- Placements to verify -->
          <div class="queue-row">
            <div class="queue-left">
              <span class="queue-dot"></span>
              <div>
                <div class="queue-title">Placements to Verify</div>
                <div class="queue-desc">Check details before faculty finalises</div>
              </div>
            </div>
            <a class="btn btn-soft btn-rounded" th:href="@{/industry/placements}">Review</a>
          </div>

          <hr class="my-1">

          <!-- Evaluations -->
          <div class="queue-row">
            <div class="queue-left">
              <span class="queue-dot"></span>
              <div>
                <div class="queue-title">End-of-Internship Evaluations</div>
                <div class="queue-desc">Complete the industry evaluation for your students</div>
              </div>
            </div>
            <a class="btn btn-soft btn-rounded" th:href="@{/industry/evaluations}">Review</a>
          </div>

        </div>
      </section>
    </div>

  </div>

  <!-- Quick Access -->
  <section class="panel section-gap">
    <div class="panel-title">
      <span>Quick Access</span>
      <span class="panel-sub">Jump to key modules</span>
    </div>

    <div class="row g-3">

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/industry/logbooks}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-journal-check"></i></div>
            <div>
              <p class="tile-title mb-1">Review Logbooks</p>
              <p class="tile-desc">Read weekly entries and approve or reject</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/industry/placements}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-building-check"></i></div>
            <div>
              <p class="tile-title mb-1">Verify Placements</p>
              <p class="tile-desc">Confirm department, scope, and internship details</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/industry/evaluations}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-clipboard2-check"></i></div>
            <div>
              <p class="tile-title mb-1">Supervisor Evaluations</p>
              <p class="tile-desc">Submit end-of-internship evaluation (40%)</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/industry/opportunities}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-megaphone"></i></div>
            <div>
              <p class="tile-title mb-1">Opportunity Posts</p>
              <p class="tile-desc">Create and manage internship openings</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/industry/companies}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-buildings"></i></div>
            <div>
              <p class="tile-title mb-1">Profile</p>
              <p class="tile-desc">Update organisation profiles and contact details</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>

      <!-- ‚úÖ Added: Change Password tile -->
      <div class="col-12 col-lg-6">
        <a class="tile" th:href="@{/industry/change-password}">
          <div class="d-flex align-items-start gap-3">
            <div class="tile-ico"><i class="bi bi-key"></i></div>
            <div>
              <p class="tile-title mb-1">Change Password</p>
              <p class="tile-desc">Update your password securely</p>
            </div>
          </div>
          <div class="tile-right"><i class="bi bi-chevron-right"></i></div>
        </a>
      </div>


    </div>
  </section>

</main>

<footer class="text-center text-muted py-4 small">
  ¬© <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2025</span>,
  Faculty of Food Science and Technology, UPM
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
