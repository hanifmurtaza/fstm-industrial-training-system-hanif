<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <title>Industry Dashboard - UPM Industrial Training</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link th:href="@{/css/app.css}" rel="stylesheet">

  <style>
    :root{ --border:#e5e7eb; --muted:#6b7280; }
    body{ background:#f5f7fa; }

    .appbar{ background:#0d6efd; color:#fff; }
    .appbar a{ color:#fff; text-decoration:none; }
    .appbar .nav-link{ color:#fff; opacity:.9; }
    .appbar .nav-link:hover{ opacity:1; text-decoration:underline; }

    .container-narrow{ max-width:1240px; }

    .stat-grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:16px; }
    @media (max-width:1199.98px){ .stat-grid{ grid-template-columns:repeat(2,1fr); } }
    @media (max-width:575.98px){ .stat-grid{ grid-template-columns:1fr; } }
    .stat-card{
      padding:14px 16px;
      border:1px solid var(--border);
      border-radius:16px;
      background:#fff;
      box-shadow:0 8px 18px rgba(0,0,0,.06);
    }
    .stat-card .label{ color:var(--muted); font-weight:600; font-size:.85rem; }
    .stat-card .value{ font-size:1.4rem; font-weight:800; line-height:1.2; }

    .callout-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:16px; }
    @media (max-width:1199.98px){ .callout-grid{ grid-template-columns:repeat(2,1fr); } }
    @media (max-width:575.98px){ .callout-grid{ grid-template-columns:1fr; } }
    .callout-grid .card{ border-radius:16px; }

    .feature-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:20px; }
    @media (max-width:1199.98px){ .feature-grid{ grid-template-columns:repeat(2,1fr); } }
    @media (max-width:767.98px){ .feature-grid{ grid-template-columns:1fr; } }
    .feature-card h5{ font-weight:700; }
    .feature-card .lead{ color:var(--muted); font-size:.95rem; }

    .page-end{ height:12px; }
  </style>
</head>
<body>

<!-- Top nav ‚Äì same family as admin, with Opportunities added -->
<nav class="navbar navbar-expand-lg appbar">
  <div class="container container-narrow">
    <a class="navbar-brand d-flex align-items-center gap-2" th:href="@{/industry/dashboard}">
      <img th:src="@{/Picture1.png}" alt="UPM" style="height:28px">
      <span>Industry Supervisor ‚Ä¢ UPM Industrial Training</span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navIndustry">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navIndustry" class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a th:href="@{/industry/dashboard}" class="nav-link fw-semibold">Dashboard</a></li>
        <li class="nav-item"><a th:href="@{/industry/logbooks}" class="nav-link">Logbooks</a></li>
        <li class="nav-item"><a th:href="@{/industry/placements}" class="nav-link">Placements</a></li>
        <li class="nav-item"><a th:href="@{/industry/evaluations}" class="nav-link">Evaluations</a></li>
        <li class="nav-item"><a th:href="@{/industry/opportunities}" class="nav-link">Opportunities</a></li>
        <li class="nav-item"><a th:href="@{/industry/companies}" class="nav-link">My Companies</a></li>
        <li class="nav-item"><a th:href="@{/logout}" class="nav-link">Logout</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="container container-narrow py-4">
  <!-- Header -->
  <h1 class="h4 mb-2">
    Welcome, Industry Supervisor <span aria-hidden="true">üè¢</span>
  </h1>
  <p class="text-muted mb-4">
    Review student logbooks, verify placements, manage internship opportunities, and submit end-of-internship evaluations.
  </p>

  <!-- KPIs (using pending / approved / rejected from controller) -->
  <section class="stat-grid mb-3">
    <div class="stat-card">
      <div class="label">Logbooks Pending Review</div>
      <div class="value" th:text="${pending} ?: 0">0</div>
    </div>
    <div class="stat-card">
      <div class="label">Logbooks Approved</div>
      <div class="value" th:text="${approved} ?: 0">0</div>
    </div>
    <div class="stat-card">
      <div class="label">Logbooks Rejected</div>
      <div class="value" th:text="${rejected} ?: 0">0</div>
    </div>
    <div class="stat-card">
      <div class="label">Role</div>
      <div class="value">Industry Sup.</div>
    </div>
  </section>

  <!-- Quick actions / queues -->
  <section class="callout-grid mb-4">
    <div class="card p-3">
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <div class="text-muted fw-semibold">Logbooks Awaiting Your Review</div>
          <div class="fs-4 fw-bold" th:text="${pending} ?: 0">0</div>
          <small class="text-muted">Filter by student or status in the logbook list.</small>
        </div>
        <a class="btn btn-outline-primary" th:href="@{/industry/logbooks(status='PENDING')}">
          Review Logbooks
        </a>
      </div>
    </div>

    <div class="card p-3">
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <div class="text-muted fw-semibold">Placements to Verify</div>
          <div class="fs-4 fw-bold">‚Äì</div>
          <small class="text-muted">
            Check student details, department, job scope and confirm reporting date.
          </small>
        </div>
        <a class="btn btn-outline-primary" th:href="@{/industry/placements}">
          Open Placements
        </a>
      </div>
    </div>

    <div class="card p-3">
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <div class="text-muted fw-semibold">End-of-Internship Evaluations</div>
          <div class="fs-4 fw-bold">‚Äì</div>
          <small class="text-muted">
            Complete the 40% industry evaluation for your students.
          </small>
        </div>
        <a class="btn btn-outline-primary" th:href="@{/industry/evaluations}">
          View Evaluations
        </a>
      </div>
    </div>
  </section>

  <!-- Feature cards (includes Opportunities now) -->
  <section class="feature-grid">
    <div class="card p-4 feature-card text-center">
      <h5><i class="bi bi-journal-check me-1"></i> Review Logbooks</h5>
      <p class="lead mb-3">
        Read weekly entries, leave comments, and approve or reject students' industrial training logbooks.
      </p>
      <a th:href="@{/industry/logbooks}" class="btn btn-primary">
        Go to Logbooks
      </a>
    </div>

    <div class="card p-4 feature-card text-center">
      <h5><i class="bi bi-building-check me-1"></i> Verify Placements</h5>
      <p class="lead mb-3">
        Confirm the department, job scope, allowance and accommodation before the faculty finalises placements.
      </p>
      <a th:href="@{/industry/placements}" class="btn btn-primary">
        View Placements
      </a>
    </div>

    <div class="card p-4 feature-card text-center">
      <h5><i class="bi bi-clipboard2-check me-1"></i> Supervisor Evaluations (40%)</h5>
      <p class="lead mb-3">
        Submit the end-of-internship evaluation rubric that contributes 40% to the students' final grade.
      </p>
      <a th:href="@{/industry/evaluations}" class="btn btn-primary">
        Open Evaluations
      </a>
    </div>

    <div class="card p-4 feature-card text-center">
      <h5><i class="bi bi-megaphone me-1"></i> Opportunity Posts</h5>
      <p class="lead mb-3">
        Create and manage internship openings that will be visible to eligible students in the system.
      </p>
      <a th:href="@{/industry/opportunities}" class="btn btn-primary">
        Manage Opportunities
      </a>
    </div>

    <div class="card p-4 feature-card text-center">
      <h5><i class="bi bi-buildings me-1"></i> Manage Company Profiles</h5>
      <p class="lead mb-3">
        Keep your organisation details, contact person, and internship defaults up to date for future cohorts.
      </p>
      <a th:href="@{/industry/companies}" class="btn btn-primary">
        My Companies
      </a>
    </div>

    <div class="card p-4 feature-card text-center">
      <h5><i class="bi bi-info-circle me-1"></i> Guidelines</h5>
      <p class="lead mb-3">
        Refer to the Industrial Training handbook and assessment rubrics provided by the faculty.
      </p>
      <button type="button" class="btn btn-outline-secondary" disabled>
        Coming Soon
      </button>
    </div>
  </section>

  <div class="page-end"></div>
</main>

<footer class="text-center text-muted py-4 small">
  ¬© <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2025</span>,
  Faculty of Food Science and Technology, UPM
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
