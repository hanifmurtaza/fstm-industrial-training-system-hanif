<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      lang="en">
<head>
    <meta charset="UTF-8">
    <title>UPM Layout</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"/>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- ✅ 关键：引入你的全局 app.css（红点样式在这里） -->
    <link th:href="@{/app.css}" rel="stylesheet">
</head>

<body>
<!-- 顶部 -->
<div class="bg-dark text-white p-3 d-flex align-items-center">
    <img th:src="@{/Picture1.png}" alt="UPM Logo" style="height: 50px; margin-right: 15px;">
    <h4 class="m-0">UPM Faculty Of Food Science and Technology Industrial Training and Career Management System</h4>
</div>

<!-- 菜单 -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">

            <li class="nav-item">
                <a class="nav-link [[${activePage == 'home'} ? 'active' : '']]" th:href="@{/lecturer/home}">
                    Home
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link [[${activePage == 'students'} ? 'active' : '']]" th:href="@{/lecturer/students}">
                    Students
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link [[${activePage == 'logbook'} ? 'active' : '']]" th:href="@{/lecturer/logbook/logbook-list}">
                    LogBook
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link [[${activePage == 'evaluation'} ? 'active' : '']]" th:href="@{/lecturer/evaluation/list}">
                    Evaluation
                </a>
            </li>

            <!-- ✅ Schedule Visit：把红点换成 notify-dot（更高级） -->
            <li class="nav-item">
                <a class="nav-link has-notify [[${activePage == 'schedule'} ? 'active' : '']]"
                   th:href="@{/lecturer/schedule}">
                    Schedule Visit
                    <span th:if="${hasRescheduleAlert}" class="notify-dot" aria-label="New update"></span>
                </a>
            </li>


            <li class="nav-item">
                <a class="nav-link [[${activePage == 'finalReport'} ? 'active' : '']]" th:href="@{/lecturer/final-report/list}">
                    Final Report
                </a>
            </li>

            <!-- ✅ Change Password（你原来多了一个 ]，我顺便修了） -->
            <li class="nav-item">
                <a class="nav-link [[${activePage == 'changePassword'} ? 'active' : '']]"
                   th:href="@{/lecturer/change-password}">
                    Change Password
                </a>
            </li>
        </ul>

        <form th:action="@{/logout}" method="post" class="d-flex">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            <button type="submit" class="btn btn-outline-light">Logout</button>
        </form>
    </div>
</nav>

<!-- 子页面内容插槽 -->
<div class="container mt-4" layout:fragment="content">
    <div class="alert alert-warning">Layout loaded but no content provided.</div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    /* 你原有 KPI/Chart 代码保持不变 */
</script>

<th:block layout:insert="~{::script}"></th:block>
</body>
</html>