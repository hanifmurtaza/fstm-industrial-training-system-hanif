<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin 路 Notifications</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <style>
    body { font-family: Inter, system-ui, sans-serif; background:#f5f7fa }
    .navbar { background:#0d6efd }
    .navbar-brand, .nav-link { color:#fff !important }
    .card { border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,.08) }
    .section-title { font-weight:600; }
  </style>
</head>
<body>
<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    <a class="navbar-brand" th:href="@{/admin/dashboard}">Admin Panel</a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" th:href="@{/admin/placements}">Placements</a></li>
        <li class="nav-item"><a class="nav-link" th:href="@{/admin/logbooks}">Logbooks</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container py-4">
  <h3 class="mb-3">Notifications</h3>

  <!-- Placements awaiting admin approval -->
  <div class="card p-3 mb-3">
    <div class="section-title mb-2"><i class="bi bi-diagram-3"></i> Placements awaiting admin approval</div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item" th:each="p : ${placementsAwaiting.content}">
        <div class="d-flex justify-content-between">
          <div>
            <div class="fw-semibold">Placement #<span th:text="${p.id}"></span></div>
            <div class="small text-muted">
              Student ID: <span th:text="${p.studentId}"></span> 路 Company ID: <span th:text="${p.companyId}"></span>
            </div>
          </div>
          <form th:action="@{/admin/placements/{id}/approve(id=${p.id})}" method="post">
            <button class="btn btn-sm btn-success">Approve</button>
          </form>
        </div>
      </li>
      <li class="list-group-item text-muted" th:if="${placementsAwaiting.totalElements == 0}">
        Nothing pending.
      </li>
    </ul>
  </div>

  <!-- Logbooks awaiting supervisor endorsement -->
  <div class="card p-3 mb-3">
    <div class="section-title mb-2"><i class="bi bi-journal-text"></i> Logbooks awaiting supervisor endorsement</div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item" th:each="l : ${logbooksAwaitingSup.content}">
        <div class="d-flex justify-content-between">
          <div>
            <div class="fw-semibold">Student ID: <span th:text="${l.studentId}"></span></div>
            <div class="small text-muted">
              Week start: <span th:text="${l.weekStartDate} ?: '-'"></span> 路 Created: <span th:text="${l.createdAt}"></span>
            </div>
          </div>
        </div>
      </li>
      <li class="list-group-item text-muted" th:if="${logbooksAwaitingSup.totalElements == 0}">
        Nothing pending.
      </li>
    </ul>
  </div>

  <!-- Logbooks awaiting lecturer endorsement -->
  <div class="card p-3">
    <div class="section-title mb-2"><i class="bi bi-journal-check"></i> Logbooks awaiting lecturer endorsement</div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item" th:each="l : ${logbooksAwaitingLec.content}">
        <div class="d-flex justify-content-between">
          <div>
            <div class="fw-semibold">Student ID: <span th:text="${l.studentId}"></span></div>
            <div class="small text-muted">
              Week start: <span th:text="${l.weekStartDate} ?: '-'"></span> 路 Sup reviewed at: <span th:text="${l.reviewedAt} ?: '-'"></span>
            </div>
          </div>
        </div>
      </li>
      <li class="list-group-item text-muted" th:if="${logbooksAwaitingLec.totalElements == 0}">
        Nothing pending.
      </li>
    </ul>
  </div>
</div>
</body>
</html>
