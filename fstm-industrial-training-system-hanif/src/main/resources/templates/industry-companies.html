<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Companies - UPM Industrial Training</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap + Icons + Font -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Global theme (IMPORTANT: your correct one) -->
    <link th:href="@{/app.css}" rel="stylesheet">

    <style>
        /* page-specific only */
        .badge-tag{
            background:#eff6ff;
            color:#1d4ed8;
            border-radius:999px;
            padding:4px 10px;
            font-size:.75rem;
            font-weight:700;
            display:inline-flex;
            align-items:center;
            gap:6px;
        }
        .col-actions{ white-space:nowrap; }
    </style>
</head>

<body>

<!-- Navbar (same as Industry dashboard) -->
<nav class="navbar navbar-expand-lg appbar">
    <div class="container container-narrow">
        <a class="navbar-brand d-flex align-items-center gap-2" th:href="@{/industry/dashboard}">

        <img th:src="@{/Picture1.png}" alt="UPM" style="height:28px">
            <span>Industry Supervisor • UPM Industrial Training</span>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navIndustry">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div id="navIndustry" class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a th:href="@{/industry/dashboard}" class="nav-link">Dashboard</a></li>
                <li class="nav-item"><a th:href="@{/industry/logbooks}" class="nav-link">Logbooks</a></li>
                <li class="nav-item"><a th:href="@{/industry/placements}" class="nav-link">Placements</a></li>
                <li class="nav-item"><a th:href="@{/industry/evaluations}" class="nav-link">Evaluations</a></li>
                <li class="nav-item"><a th:href="@{/industry/opportunities}" class="nav-link">Opportunities</a></li>
                <li class="nav-item"><a th:href="@{/industry/companies}" class="nav-link fw-semibold">Profile</a></li>
                <li class="nav-item"><a th:href="@{/logout}" class="nav-link">Logout</a></li>
            </ul>
        </div>
    </div>
</nav>

<main class="container container-narrow py-4">

    <!-- Header -->
    <div class="d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3">
        <div>
            <span class="pill"><i class="bi bi-buildings"></i> Companies</span>
            <h1 class="h4 page-title mb-0 mt-2">My Company Profiles</h1>
            <div class="muted mt-1">
                This is your company profile linked to your Industry Supervisor account.
            </div>
        </div>
    </div>

    <!-- Empty state -->
    <div th:if="${#lists.isEmpty(companies)}" class="card-soft p-4">
        <div class="d-flex gap-3 align-items-start">
            <div class="fs-3 text-primary"><i class="bi bi-info-circle"></i></div>
            <div>
                <div class="fw-semibold mb-1">No companies yet</div>
                <div class="muted">
                    You currently have no companies associated with your supervised placements.
                    Once students are placed under your supervision, their companies will appear here.
                </div>
            </div>
        </div>
    </div>

    <!-- Company list -->
    <div th:if="${!#lists.isEmpty(companies)}" class="card-soft p-3 p-md-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0 align-middle">
                <thead class="table-light">
                <tr>
                    <th style="min-width:260px;">Company</th>
                    <th style="min-width:160px;">Sector</th>
                    <th style="min-width:280px;">Address</th>
                    <th style="min-width:240px;">Contact</th>
                    <th class="text-end col-actions" style="min-width:120px;">Actions</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="c : ${companies}">
                    <!-- Company -->
                    <td>
                        <div class="fw-semibold" th:text="${c.name}">Company Name</div>

                        <div class="small-note mt-1"
                             th:if="${c.website != null and !#strings.isEmpty(c.website)}">
                            <i class="bi bi-globe2 me-1"></i>
                            <span th:text="${c.website}">https://example.com</span>
                        </div>

                        <div class="small-note mt-1"
                             th:if="${c.website == null or #strings.isEmpty(c.website)}">
                            <span class="muted">No website provided</span>
                        </div>
                    </td>

                    <!-- Sector -->
                    <td>
                        <span th:if="${c.sector != null and !#strings.isEmpty(c.sector)}"
                              class="badge-tag"
                              th:text="${c.sector}">
                            Food Manufacturing
                        </span>

                        <span th:if="${c.sector == null or #strings.isEmpty(c.sector)}"
                              class="muted small">
                            Not specified
                        </span>
                    </td>

                    <!-- Address -->
                    <td>
                        <span th:if="${c.address != null and !#strings.isEmpty(c.address)}"
                              th:text="${c.address}">
                            Address line
                        </span>

                        <span th:if="${c.address == null or #strings.isEmpty(c.address)}"
                              class="muted small">
                            No address provided
                        </span>
                    </td>

                    <!-- Contact -->
                    <td>
                        <div th:if="${c.contactName != null and !#strings.isEmpty(c.contactName)}">
                            <div class="fw-semibold" th:text="${c.contactName}">Contact Person</div>

                            <div class="small-note"
                                 th:if="${c.contactEmail != null and !#strings.isEmpty(c.contactEmail)}">
                                <i class="bi bi-envelope me-1"></i>
                                <span th:text="${c.contactEmail}">email@example.com</span>
                            </div>

                            <div class="small-note"
                                 th:if="${c.contactPhone != null and !#strings.isEmpty(c.contactPhone)}">
                                <i class="bi bi-telephone me-1"></i>
                                <span th:text="${c.contactPhone}">012-3456789</span>
                            </div>

                            <div class="small-note"
                                 th:if="${(c.contactEmail == null or #strings.isEmpty(c.contactEmail))
                                          and (c.contactPhone == null or #strings.isEmpty(c.contactPhone))}">
                                <span class="muted">No email/phone provided</span>
                            </div>
                        </div>

                        <span th:if="${c.contactName == null or #strings.isEmpty(c.contactName)}"
                              class="muted small">
                            No contact person set
                        </span>
                    </td>

                    <!-- Actions -->
                    <td class="text-end col-actions">
                        <a th:href="@{|/industry/companies/${c.id}/edit|}"
                           class="btn btn-sm btn-outline-primary btn-rounded">
                            <i class="bi bi-pencil-square me-1"></i> Edit
                        </a>
                    </td>
                </tr>
                </tbody>

            </table>
        </div>
    </div>

</main>

<footer class="text-center text-muted py-4 small">
    © <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2025</span>,
    Faculty of Food Science and Technology, UPM
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
