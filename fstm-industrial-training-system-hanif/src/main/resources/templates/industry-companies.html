<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Companies - UPM Industrial Training</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link th:href="@{/css/app.css}" rel="stylesheet">

    <style>
        :root{ --border:#e5e7eb; --muted:#6b7280; }
        body{ background:#f5f7fa; }

        .appbar{ background:#0d6efd; color:#fff; }
        .appbar a{ color:#fff; text-decoration:none; }
        .appbar .nav-link{ color:#fff; opacity:.9; }
        .appbar .nav-link:hover{ opacity:1; text-decoration:underline; }

        .container-narrow{ max-width:1240px; }

        .card-rounded{ border-radius:16px; border:1px solid var(--border); box-shadow:0 8px 18px rgba(0,0,0,.06); }
        .table thead th{ font-size:.85rem; text-transform:uppercase; letter-spacing:.03em; color:var(--muted); }
        .badge-tag{ background:#eff6ff; color:#1d4ed8; border-radius:999px; padding:2px 10px; font-size:.75rem; }

        .page-end{ height:12px; }
    </style>
</head>
<body>

<!-- Top nav – styled like admin, but for Industry Supervisor -->
<nav class="navbar navbar-expand-lg appbar">
    <div class="container container-narrow">
        <a class="navbar-brand d-flex align-items-center gap-2" th:href="@{/industry/dashboard}">
            <img th:src="@{/Picture1.png}" alt="UPM" style="height:28px">
            <span>Industry Supervisor • UPM Industrial Training</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navIndustry">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div id="navIndustry" class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a th:href="@{/industry/dashboard}" class="nav-link">Dashboard</a></li>
                <li class="nav-item"><a th:href="@{/industry/logbooks}" class="nav-link">Logbooks</a></li>
                <li class="nav-item"><a th:href="@{/industry/placements}" class="nav-link">Placements</a></li>
                <li class="nav-item"><a th:href="@{/industry/evaluations}" class="nav-link">Evaluations</a></li>
                <li class="nav-item"><a th:href="@{/industry/companies}" class="nav-link fw-semibold">My Companies</a></li>
                <li class="nav-item"><a th:href="@{/logout}" class="nav-link">Logout</a></li>
            </ul>
        </div>
    </div>
</nav>

<main class="container container-narrow py-4">

    <!-- Page header -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <h1 class="h4 mb-1">My Company Profiles</h1>
            <p class="text-muted mb-0">
                These are the companies linked to your supervised students' placements.
            </p>
        </div>
    </div>

    <!-- Empty state -->
    <div th:if="${#lists.isEmpty(companies)}" class="alert alert-info card-rounded py-3 px-3">
        You currently have no companies associated with your supervised placements.
        Once students are placed under your supervision, their companies will appear here.
    </div>

    <!-- Company list -->
    <div th:if="${!#lists.isEmpty(companies)}" class="card card-rounded">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                    <thead class="table-light">
                    <tr>
                        <th style="width: 28%;">Company</th>
                        <th style="width: 18%;">Sector</th>
                        <th style="width: 26%;">Address</th>
                        <th style="width: 18%;">Contact</th>
                        <th style="width: 10%;" class="text-end">Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="c : ${companies}">
                        <!-- Company -->
                        <td>
                            <div class="fw-semibold" th:text="${c.name}">Company Name</div>
                            <div class="small text-muted" th:if="${c.website != null and !#strings.isEmpty(c.website)}">
                                <i class="bi bi-globe2 me-1"></i>
                                <span th:text="${c.website}">https://example.com</span>
                            </div>
                        </td>

                        <!-- Sector -->
                        <td>
              <span th:if="${c.sector != null and !#strings.isEmpty(c.sector)}"
                    class="badge-tag"
                    th:text="${c.sector}">Food Manufacturing</span>
                            <span th:if="${c.sector == null or #strings.isEmpty(c.sector)}"
                                  class="text-muted small">
                Not specified
              </span>
                        </td>

                        <!-- Address -->
                        <td>
              <span th:if="${c.address != null and !#strings.isEmpty(c.address)}"
                    th:text="${c.address}">
                Address line
              </span>
                            <span th:if="${c.address == null or #strings.isEmpty(c.address)}"
                                  class="text-muted small">
                No address provided
              </span>
                        </td>

                        <!-- Contact -->
                        <td>
                            <div th:if="${c.contactName != null and !#strings.isEmpty(c.contactName)}">
                                <span class="fw-semibold" th:text="${c.contactName}">Contact Person</span><br>
                                <small th:if="${c.contactEmail != null and !#strings.isEmpty(c.contactEmail)}"
                                       class="d-block text-muted">
                                    <i class="bi bi-envelope me-1"></i>
                                    <span th:text="${c.contactEmail}">email@example.com</span>
                                </small>
                                <small th:if="${c.contactPhone != null and !#strings.isEmpty(c.contactPhone)}"
                                       class="d-block text-muted">
                                    <i class="bi bi-telephone me-1"></i>
                                    <span th:text="${c.contactPhone}">012-3456789</span>
                                </small>
                            </div>
                            <span th:if="${c.contactName == null or #strings.isEmpty(c.contactName)}"
                                  class="text-muted small">
                No contact person set
              </span>
                        </td>

                        <!-- Actions -->
                        <td class="text-end">
                            <a th:href="@{|/industry/companies/${c.id}/edit|}"
                               class="btn btn-sm btn-outline-primary">
                                <i class="bi bi-pencil-square me-1"></i>Edit
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="page-end"></div>
</main>

<footer class="text-center text-muted py-4 small">
    © <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2025</span>,
    Faculty of Food Science and Technology, UPM
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
